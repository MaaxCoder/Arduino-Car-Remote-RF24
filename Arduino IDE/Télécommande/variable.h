#include <Arduino.h>
#include <SPI.h>
#include <RF24.h>
#include <nRF24L01.h>

const int Bouton[] = {2, 3, 4, 5, 6, 7, 8};

#define AnalogJoyX A0
#define AnalogJoyY A1

RF24 radio(9, 10);
const byte adress[6] = "00001";

struct structure
{
	boolean BtA;
	boolean BtB;
	boolean BtC;
	boolean BtD;
	boolean BtE;
	boolean BtF;
	boolean BtK;

	int JoyX;
	int JoyY;
};

structure Etat;

struct structure2
{
	int HAUT;
	int BAS;
	int GAUCHE;
	int DROITE;
	int GAUCHE_BAS;
	int DROITE_BAS;
};

structure2 Direction;

struct structure3
{
	int VitesseG;
	int VitesseD;
	int VitesseG_Bas;
	int VitesseD_Bas;
	bool Direction;
	bool Pile_gauche;
	bool Pile_droite;
	int Vitesse_pile_gauche;
	int vitesse_pile_droite;
	bool klaxon;
	char BoutonDirection;

	int mode = 0;

	float colorSend;

	bool blink;
};
structure3 Data;

void verifBtJoy()
{
	Etat.BtA = digitalRead(Bouton[0]);
	Etat.BtB = digitalRead(Bouton[1]);
	Etat.BtC = digitalRead(Bouton[2]);
	Etat.BtD = digitalRead(Bouton[3]);
	Etat.BtE = digitalRead(Bouton[4]);
	Etat.BtF = digitalRead(Bouton[5]);
	Etat.BtK = digitalRead(Bouton[6]);

	Etat.JoyX = analogRead(AnalogJoyX);
	Etat.JoyY = analogRead(AnalogJoyY);
}

float table_color[17][17] = {
	0xFFFF00, 0xFFB40F, 0xFFA81E, 0xFF9C2A, 0xFF8F35, 0xFF803E, 0xFF7145, 0xFF5F49, 0xFF0000, 0xFF495F, 0xFF4571, 0xFF3E80, 0xFF358F, 0xFF2A9C, 0xFF1EA8, 0xFF0FB4, 0xFF00FF,
	0xFFD20F, 0xFFC720, 0xFFBC2F, 0xFFB03D, 0xFFA349, 0xFF9653, 0xFF875B, 0xFF7560, 0xFF6161, 0xFF6075, 0xFF5B87, 0xFF5396, 0xFF49A3, 0xFF3DB0, 0xFF2FBC, 0xFF20C7, 0xFF0FD2,
	0xFFE51E, 0xFFDA2F, 0xFFCF40, 0xFFC44F, 0xFFB85C, 0xFFAB68, 0xFF9C70, 0xFF8C76, 0xFF7878, 0xFF768C, 0xFF709C, 0xFF68AB, 0xFF5CB8, 0xFF4FC4, 0xFF40CF, 0xFF2FDA, 0xFF1EE5,
	0xFFF82A, 0xFFED3D, 0xFFE24F, 0xFFD760, 0xFFCC6F, 0xFFBF7C, 0xFFB286, 0xFFA28C, 0xFF8E8E, 0xFF8CA2, 0xFF86B2, 0xFF7CBF, 0xFF6FCC, 0xFF60D7, 0xFF4FE2, 0xFF3DED, 0xFF2AF8,
	0xF3FF35, 0xFEFF49, 0xFFF55C, 0xFFEA6F, 0xFFDF80, 0xFFD48E, 0xFFC79A, 0xFFB8A2, 0xFFA5A5, 0xFFA2B8, 0xFF9AC7, 0xFF8ED4, 0xFF80DF, 0xFF6FEA, 0xFF5CF5, 0xFE49FF, 0xF335FF,
	0xE1FF3E, 0xECFF53, 0xF6FF68, 0xFFFD7C, 0xFFF28E, 0xFFE79F, 0xFFDBAE, 0xFFCEB8, 0xFFBBBB, 0xFFB8CE, 0xFFAEDB, 0xFF9FE7, 0xFF8EF2, 0xFF7CFD, 0xF668FF, 0xEC53FF, 0xE13EFF,
	0xCEFF45, 0xD9FF5B, 0xE4FF70, 0xEEFF86, 0xF9FF9A, 0xFFFAAE, 0xFFEFBF, 0xFFE3CD, 0xFFD2D2, 0xFFCDE3, 0xFFBFEF, 0xFFAEFA, 0xF99AFF, 0xEE86FF, 0xE470FF, 0xD95BFF, 0xCE45FF,
	0xBAFF49, 0xC5FF60, 0xD0FF76, 0xDBFF8C, 0xE6FFA2, 0xF1FFB8, 0xFCFFCD, 0xFFF7DF, 0xFFE8E8, 0xFFDFF7, 0xFCCDFF, 0xF1B8FF, 0xE6A2FF, 0xDB8CFF, 0xD076FF, 0xC560FF, 0xBA49FF,
	0xA5FF4B, 0xB0FF61, 0xBBFF78, 0xC7FF8E, 0xD2FFA5, 0xDDFFBB, 0xE8FFD2, 0xF4FFE8, 0xFFFFFF, 0xF4E8FF, 0xE8D2FF, 0xDDBBFF, 0xD2A5FF, 0xC78EFF, 0xBB78FF, 0xB061FF, 0xA54BFF,
	0x8FFF49, 0x9AFF60, 0xA5FF76, 0xB0FF8C, 0xBBFFA2, 0xC5FFB8, 0xCFFFCD, 0xDFFFE7, 0xE8FFFF, 0xDFE7FF, 0xCFCDFF, 0xC5B8FF, 0xBBA2FF, 0xB08CFF, 0xA576FF, 0x9A60FF, 0x8F49FF,
	0x77FF45, 0x81FF5B, 0x8CFF70, 0x96FF86, 0xA0FF9A, 0xAEFFB3, 0xBFFFCF, 0xCDFFE9, 0xD2FFFF, 0xCDE9FF, 0xBFCFFF, 0xAEB3FF, 0xA09AFF, 0x9686FF, 0x8C70FF, 0x815BFF, 0x7745FF,
	0x5DFF3E, 0x67FF53, 0x70FF68, 0x7CFF7E, 0x8EFF9B, 0x9FFFB7, 0xAEFFD1, 0xB8FFE9, 0xBBFFFF, 0xB8E9FF, 0xAED1FF, 0x9FB7FF, 0x8E9BFF, 0x7C7EFF, 0x7068FF, 0x6753FF, 0x5D3EFF,
	0x41FF35, 0x4AFF49, 0x5CFF66, 0x6FFF84, 0x80FF9F, 0x8EFFBA, 0x9AFFD2, 0xA2FFE9, 0xA5FFFF, 0xA2E9FF, 0x9AD2FF, 0x8EBAFF, 0x809FFF, 0x6F84FF, 0x5C66FF, 0x4A49FF, 0x4135FF,
	0x2AFF31, 0x3DFF4F, 0x4FFF6C, 0x60FF87, 0x6FFFA2, 0x7CFFBB, 0x86FFD3, 0x8CFFE9, 0x8EFFFF, 0x8CE9FF, 0x86D3FF, 0x7CBBFF, 0x6FA2FF, 0x6087FF, 0x4F6CFF, 0x3D4FFF, 0x2A31FF,
	0x1EFF37, 0x2FFF54, 0x40FF70, 0x4FFF8A, 0x5CFFA4, 0x68FFBC, 0x70FFD3, 0x76FFE9, 0x78FFFF, 0x76E9FF, 0x70D3FF, 0x68BCFF, 0x5CA4FF, 0x4F8AFF, 0x4070FF, 0x2F54FF, 0x1E37FF,
	0x0FFF3C, 0x20FF58, 0x2FFF72, 0x3DFF8C, 0x49FFA5, 0x53FFBD, 0x5BFFD3, 0x60FFE9, 0x61FFFF, 0x60E9FF, 0x5BD3FF, 0x53BDFF, 0x49A5FF, 0x3D8CFF, 0x2F72FF, 0x2058FF, 0x0F3CFF,
	0x00FF00, 0x0FFF5B, 0x1EFF74, 0x2AFF8E, 0x35FFA6, 0x3EFFBD, 0x45FFD4, 0x49FFE9, 0x00FFFF, 0x49E9FF, 0x45D4FF, 0x3EBDFF, 0x35A6FF, 0x2A8EFF, 0x1E74FF, 0x0F5BFF, 0x0000FF};


int zoneX;
int zoneY;

int EtatLed = 1;
bool BtTempoC = 0;
bool BtTempoBlink = 0;
bool BtTempoB = 0;
bool BtTempoD = 0;
bool decouverte = 1;